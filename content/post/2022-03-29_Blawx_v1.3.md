---
title: "Blawx v1.3.1-alpha"
date: 2022-04-05
draft: true
toc: true
keywords: ['scasp','blawx']
---

There have been a couple of major changes to Blawx since the
last blog post about it. The latest version, v1.3.1-alpha, now
features defaults and exceptions across sections and sub-sections
of rules.

## Exceptions

Laws are written using defaults, and exceptions to those defaults.
If your tool can't express defaults and exceptions the way laws do,
you are forced to combine them into a single piece of code. This
breaks the one-to-one relationship between pieces of the rule and
pieces of the code, making the code harder to write, harder to read,
and much harder to maintain.

In laws, these defaults and exceptions are often (but not always -
we will come back to that), divided out into different sections of
the law. For example, section 2 might say "by default yes", and 
section 3 might say "despite section 2, in some cases, no."

Blawx's new defaults and exceptions system is designed to allow you
to mimic those declarations in your code.

It adds 5 different elements to the interface. First, each section
of the rule now has a corresponding block in the "Known Sections"
drawer of the toolbox. Then, there are four new blocks in the 
"Exceptions" drawer.

The "Overrules" block allows you to say that one section overrules
another.

The "Opposes" block allows you to specify that two conclusions are
inconsistent, even if they aren't logically opposite. You usually
won't need this, but it comes in handy sometimes.

The "According to" block let's you indicate that a conclusion was
reached by a section, but that conclusion is a default that could
be overridden by another conclusion elsewhere. If you use the
"According to" block in a question, you are asking whether a given
(or any) section of the rule reached the given conclusion.

Finally, the "Holds" block is used in questions, and allows you to
ask whether a conclusion was found subject to exceptions, but no
relevant exceptions applied to it.

That's it. When a section of your code makes a conclusion that can
be overridden, use the "according to" block to describe the
conclusion. To simplify things, a pre-filled in "Rule" block with
an "according to" block and the name of the current section inserted
is now always available in the Primary drawer. So there is no more
work to create a rule with a defeasible conclusion than one that is
not.

And you are going to _want_ to use this feature most of the time,
because in future it will be possible to enhance the explanations you
get back with the text of the relevant sections.

When the law is explicit about which rules override which other rules,
you can match those explicit declarations as and where they appear. Both
"despite" and "subject to" can be modelled using "overrules".

## Exceptions within Sections

Occasionally, laws are drafted in such a way that the default and the
exception appear in the same block of text, like "birds fly, except
penguins and emus." We want you to be able to encode these sorts of
rules, too, using the same block interface. The problem is that
there would only be one reference to the entire section in the
"Known Sections" drawer, so you don't have a way to refer to less than
the whole section.

To solve that problem, I added a "spans" feature to the CLEAN tool that
I released a few weeks ago.  Now CLEAN will allow you to name nested
sub-parts of a block of legal text, like this:

```text
Bird Act

1. [default]{Birds fly}, [exception]{except penguins and emus}.
```

Inside Blawx, this creates four "known section" blocks:
* BA
* BA 1
* BA 1.default
* BA 1.exception

Blawx treats each "span" of text as a separate section with its own
code, which can override or be overridden by others.

## Next Up - Enhanced Explanations

Now that we have defeasible conclusions linked to the piece of legislation
that gave rise to them, the next step is to integrate the text of the law
in the answers that are received back.